(function(h,b){function c(b,a,f,c){b[i](k+a,"wheel"===j?f:function(a){a||(a=h.event);const b={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===a.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};return"mousewheel"===j?(b.deltaY=-1/40*a.wheelDelta,a.wheelDeltaX&&(b.deltaX=-1/40*a.wheelDeltaX)):b.deltaY=a.detail,f(b)},c||!1)}let i,j,k="";h.addEventListener?i="addEventListener":(i="attachEvent",k="on"),j="onwheel"in b.createElement("div")?"wheel":void 0===b.onmousewheel?"DOMMouseScroll":"mousewheel",h.addWheelListener=function(d,e,a){c(d,j,e,a),"DOMMouseScroll"===j&&c(d,"MozMousePixelScroll",e,a)}})(window,document),function(b){b.Viewer=function(){function o(){e=document.createElement("div"),e.id="viewer",addWheelListener(e,b=>{r=!1,u.setScale(u.scale+(0<b.wheelDelta?.1:-.1))});const g=document.createElement("div");g.className="viewer-img",e.appendChild(g),f=document.createElement("img"),f.src=s[t],u.refresh(),q(f),c(f),d(f),g.appendChild(f);const a=document.createElement("div");a.className="viewer-tools";const h=document.createElement("div");h.className="btn next",h.addEventListener("click",c=>{c.stopPropagation(),b.next()}),a.appendChild(h);const i=document.createElement("div");i.className="btn prev",i.addEventListener("click",c=>{c.stopPropagation(),b.prev()}),a.appendChild(i);const j=document.createElement("div");j.className="btn close",j.addEventListener("click",()=>b.close()),a.appendChild(j),e.appendChild(a),document.body.appendChild(e)}function p(e){return new Promise((b,a)=>{const c=new Image;c.src=e,c.onload=()=>b(e),c.onerror=()=>a()})}function q(i){const j=("ontouchstart"in i),k=b=>b.clientX||b.touches?.item(0).clientX,c=b=>b.clientY||b.touches?.item(0).clientY;i.addEventListener(j?"touchstart":"mousedown",a=>{a.stopPropagation();const d=k(a)-i.offsetLeft,f=c(a)-i.offsetTop,e=g=>{g.preventDefault();const a=k(g)-d,b=c(g)-f;u.setTranslate(a,b)};document.addEventListener(j?"touchmove":"mousemove",e,{passive:!1}),document.addEventListener(j?"touchend":"mouseup",a=>{a.stopPropagation(),document.removeEventListener(j?"touchmove":"mousemove",e)})})}function c(c){const f={};c.addEventListener("touchstart",function(b){const c=b.touches,a=c[0],d=c[1];b.preventDefault(),f.pageX=a.pageX,f.pageY=a.pageY,f.moveable=!0,d&&(f.pageX2=d.pageX,f.pageY2=d.pageY)}),document.addEventListener("touchmove",function(b){if(f.moveable){b.preventDefault();const a=b.touches,g=a[0],d=a[1];if(d){f.pageX2||(f.pageX2=d.pageX),f.pageY2||(f.pageY2=d.pageY);const b=function(b,c){return Math.hypot(c.x-b.x,c.y-b.y)},a=b({x:g.pageX,y:g.pageY},{x:d.pageX,y:d.pageY})/b({x:f.pageX,y:f.pageY},{x:f.pageX2,y:f.pageY2});u.setScale(a)}}},{passive:!1}),document.addEventListener("touchend",function(){f.moveable=!1,delete f.pageX2,delete f.pageY2})}function d(b){let a,c;"ontouchstart"in b&&b.addEventListener("touchstart",function(a){c=a.targetTouches}),b.addEventListener("ontouchend"in b?"touchend":"click",function(){1<c?.length||(a?Date.now()-a<500?(r=!r,u.setScale(1===u.scale?u.scale+1:1),1===u.scale&&u.setTranslate(null,null),a=0):a=Date.now():a=Date.now())})}const b={};let e=null,f=null,a=!1,r=!1,s=[],t=0;b.view=function(b){s=b,t=0,o(),m.fadeIn(f),a=!0},b.prev=function(){if(1>=s.length)return;0===t&&(t=s.length),u.restore();const a=s[--t];p(a).then(()=>{f.src=a,m.fadeIn(f)})},b.next=function(){if(1>=s.length)return;t===s.length-1&&(t=-1),u.restore();const a=s[++t];p(a).then(()=>{f.src=a,m.fadeIn(f)})},b.close=function(){a&&m.fadeOut(f).then(()=>{e.remove(),setTimeout(()=>u.restore(),300)})};const u={scale:1,left:"auto",top:"auto",setScale(b){this.scale=b,this.scale=.5>this.scale?.5:this.scale,this.scale=3<this.scale?3:this.scale,this.refresh()},setTranslate(c,a){this.left=c,this.top=a,this.refresh()},refresh(){const b=f.style;b.transform=`scale(${this.scale})`,b.left=this.left?this.left+"px":"auto",b.top=this.top?this.top+"px":"auto"},restore(){this.scale=1,this.left=this.top=null,this.refresh()}},m={fade(e,a){return new Promise(b=>{const c=e.classList;c.add(a),setTimeout(()=>{c.remove(a),b()},200)})},fadeIn(b){return m.fade(b,"viewer-fade-in")},fadeOut(b){return m.fade(b,"viewer-fade-out")}};return b}}(window);